"use strict";(self["webpackChunksssbaer_front"]=self["webpackChunksssbaer_front"]||[]).push([[554],{2554:(e,t,o)=>{o.r(t),o.d(t,{default:()=>E});var a=o(9835),s=o(6970);const l=(0,a._)("div",{class:"text-h6"},"Estadisticas de las solicitudes",-1),n={class:"row"};function i(e,t,o,i,r,c){const d=(0,a.up)("card-social"),u=(0,a.up)("q-icon"),m=(0,a.up)("q-item-section"),p=(0,a.up)("q-item"),h=(0,a.up)("q-card-section"),w=(0,a.up)("q-avatar"),g=(0,a.up)("q-item-label"),f=(0,a.up)("estadisticas-dashboard"),_=(0,a.up)("q-card"),b=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(b,{class:"q-pa-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{icon_position:"right"}),(0,a.Wm)(_,{class:"q-mt-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"text-h6 q-pb-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{avatar:"",class:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{color:"blue",name:"fas fa-chart-line",size:"44px"})])),_:1}),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[l])),_:1})])),_:1})])),_:1}),(0,a.Wm)(h,{class:"row"},{default:(0,a.w5)((()=>[(0,a._)("div",n,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.estadisticas,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t},[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{top:"",avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{color:e.color,"text-color":"white",icon:e.icon},null,8,["color","icon"])])),_:2},1024),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:(0,s.C_)(`text-h6 text-${e.color} text-bold`)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.valor),1)])),_:2},1032,["class"]),(0,a.Wm)(g,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.texto),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])))),128))])])),_:1}),(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f)])),_:1})])),_:1})])),_:1})}const r={class:"row q-col-gutter-sm"};function c(e,t,o,l,n,i){const c=(0,a.up)("q-icon"),d=(0,a.up)("q-item-section"),u=(0,a.up)("q-item-label"),m=(0,a.up)("q-item"),p=(0,a.up)("q-card-section"),h=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(h,{class:"bg-transparent no-shadow no-border"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"q-pa-none"},{default:(0,a.w5)((()=>[(0,a._)("div",r,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.items,((t,o)=>((0,a.wg)(),(0,a.iD)("div",{key:o,class:"col-md-4 col-sm-12 col-xs-12"},[(0,a.Wm)(m,{style:(0,s.j5)(`background-color: ${t.color1}`),class:"q-pa-none"},{default:(0,a.w5)((()=>["left"===e.icon_position?((0,a.wg)(),(0,a.j4)(d,{key:0,side:"",style:(0,s.j5)(`background-color: ${t.color2}`),class:"q-pa-lg q-mr-none text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{name:t.icon,color:"white",size:"24px"},null,8,["name"])])),_:2},1032,["style"])):(0,a.kq)("",!0),(0,a.Wm)(d,{class:"q-pa-md q-ml-none text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"text-white text-h6 text-weight-bolder"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(t.value),1)])),_:2},1024),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(t.title),1)])),_:2},1024)])),_:2},1024),"right"===e.icon_position?((0,a.wg)(),(0,a.j4)(d,{key:1,side:"",class:"q-mr-md text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{name:t.icon,color:"white",size:"44px"},null,8,["name"])])),_:2},1024)):(0,a.kq)("",!0)])),_:2},1032,["style"])])))),128))])])),_:1})])),_:1})}var d=o(1247);const u=(0,a.aZ)({name:"CardSocial",props:{icon_position:{required:!1,default:"left"}},setup(){const e=(0,d.o)(),t=(0,a.Fl)((()=>[{title:"Trabajadores registrados",icon:"person",value:e.usuariosTrabajadores.length,color1:"#546bfa",color2:"#3e51b5"},{title:"Administradores registrados",icon:"engineering",value:e.usuariosAdministradores.length,color1:"#3a9688",color2:"#3e51b5"},{title:"Solicitudes recibidas",icon:"receipt",value:e.solicitudes.length,color1:"#7cb342",color2:"#3e51b5"}]));return{admiStore:e,items:t}}});var m=o(1639),p=o(4458),h=o(3190),w=o(490),g=o(1233),f=o(2857),_=o(3115),b=o(9984),q=o.n(b);const v=(0,m.Z)(u,[["render",c]]),x=v;function W(e,t,o,s,l,n){const i=(0,a.up)("apexchart");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(i,{type:"bar",height:"350",options:s.chartOptions,series:s.series},null,8,["options","series"])])}q()(u,"components",{QCard:p.Z,QCardSection:h.Z,QItem:w.Z,QItemSection:g.Z,QIcon:f.Z,QItemLabel:_.Z});var S=o(499);const k={name:"EstadisticasDashboard",mounted(){this.$nextTick((()=>{window.dispatchEvent(new Event("resize"))}))},setup(){const e=(0,d.o)(),t=(0,S.qj)({chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:[]},yaxis:{title:{text:"Historico"}},fill:{opacity:1},tooltip:{y:{formatter:function(e){return e+" solicitudes"}}}}),o=(0,S.qj)([{name:"Sin atender",data:[]},{name:"En Proceso",data:[]},{name:"Completadas",data:[]}]);(0,a.YP)((()=>e.solicitudes.length),(()=>{s()})),(0,a.bv)((()=>{Boolean(e.solicitudes.length)&&s()}));const s=()=>{const a=l(e.solicitudes);a.forEach((a=>{o.forEach((t=>{"Sin atender"===t.name?o[0].data.push(e.solicitudesSinAtender.filter((e=>new Date(e.created_at).toLocaleString("default",{month:"long"})===a.mes)).length):"En Proceso"===t.name?o[1].data.push(e.solicitudesAtendidas.filter((e=>new Date(e.created_at).toLocaleString("default",{month:"long"})===a.mes)).length):o[2].data.push(e.solicitudesCompletadas.filter((e=>new Date(e.created_at).toLocaleString("default",{month:"long"})===a.mes)).length)})),t.xaxis.categories.push(a.mes)}))},l=e=>{let t=[];return e.reduce(((e,o)=>{let a=new Date(o.created_at).toLocaleString("default",{month:"long"});return e[a]||(e[a]={mes:a,solicitudes:[]},t.push(e[a])),a===e[a].mes&&e[a].solicitudes.push(o),e}),{}),t};return{chartOptions:t,series:o}}},Z=(0,m.Z)(k,[["render",W]]),y=Z,C={name:"DashboardSupervisor",components:{CardSocial:x,EstadisticasDashboard:y},setup(){const e=(0,d.o)();return{admiStore:e,estadisticas:(0,a.Fl)((()=>[{color:"warning",icon:"report_problem",valor:e.solicitudesSinAtender.length,texto:"Sin atender"},{color:"primary",icon:"hourglass_empty",valor:e.solicitudesAtendidas.length,texto:"En Proceso"},{color:"positive",icon:"check",valor:e.solicitudesCompletadas.length,texto:"Completadas"},{color:"negative",icon:"close",valor:"sin calcular",texto:"Canceladas"}]))}}};var Q=o(9885),D=o(1357);const j=(0,m.Z)(C,[["render",i]]),E=j;q()(C,"components",{QPage:Q.Z,QCard:p.Z,QCardSection:h.Z,QItem:w.Z,QItemSection:g.Z,QIcon:f.Z,QAvatar:D.Z,QItemLabel:_.Z})}}]);