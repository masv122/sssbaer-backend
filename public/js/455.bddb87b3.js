"use strict";(self["webpackChunksssbaer_front"]=self["webpackChunksssbaer_front"]||[]).push([[455],{7455:(e,a,l)=>{l.r(a),l.d(a,{default:()=>B});var o=l(9835),r=l(6970);const i={class:"q-pa-md"};function t(e,a,l,t,s,n){const u=(0,o.up)("q-icon"),d=(0,o.up)("q-input"),m=(0,o.up)("q-btn"),c=(0,o.up)("q-card-actions"),p=(0,o.up)("q-separator"),f=(0,o.up)("q-item-label"),v=(0,o.up)("q-item-section"),b=(0,o.up)("q-item"),g=(0,o.up)("q-list"),w=(0,o.up)("q-card"),y=(0,o.up)("q-table"),h=(0,o.up)("editar-usuario");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(y,{grid:"",title:"Usuarios",rows:t.usuarios,columns:t.columns,"row-key":"name","hide-header":""},{"top-right":(0,o.w5)((()=>[(0,o.Wm)(d,{borderless:"",dense:"",debounce:"300",placeholder:"Buscar"},{append:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"search"})])),_:1})])),item:(0,o.w5)((e=>[(0,o._)("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:(0,r.j5)(e.selected?"transform: scale(0.95);":"")},[(0,o.Wm)(w,{class:(0,r.C_)(e.selected?"bg-grey-2":"")},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{flat:"",color:"primary",size:"sm",rounded:"",icon:"edit",onClick:a=>t.cargarPerfil(e.row)},null,8,["onClick"]),(0,o.Wm)(m,{flat:"",color:"negative",size:"sm",rounded:"",icon:"cancel",onClick:a=>t.cargarPerfil(e.row)},null,8,["onClick"])])),_:2},1024),(0,o.Wm)(p),(0,o.Wm)(g,{dense:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.cols,(e=>((0,o.wg)(),(0,o.j4)(b,{key:e.name},{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.label),1)])),_:2},1024)])),_:2},1024),(0,o.Wm)(v,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.value),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1032,["class"])],4)])),_:1},8,["rows","columns"]),(0,o.Wm)(h,{editar:t.modoEditar,usuario:t.usuario.data,onDoneEditing:a[0]||(a[0]=e=>t.modoEditar=!1)},null,8,["editar","usuario"])])}var s=l(499),n=l(6183),u=l(1569),d=l(1446),m=l(1957);const c=(0,o._)("div",{class:"text-h5"},"Modificar perfil",-1),p=(0,o.Uk)("Desliza para cambiar la contraseña"),f={key:1};function v(e,a,l,r,i,t){const s=(0,o.up)("q-separator"),n=(0,o.up)("q-input"),u=(0,o.up)("q-icon"),d=(0,o.up)("q-avatar"),v=(0,o.up)("q-item-section"),b=(0,o.up)("q-item"),g=(0,o.up)("q-slide-item"),w=(0,o.up)("q-btn"),y=(0,o.up)("q-form"),h=(0,o.up)("q-card"),q=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.j4)(q,{modelValue:r.modoEditar,"onUpdate:modelValue":a[6]||(a[6]=e=>r.modoEditar=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"my-card q-pa-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{onSubmit:(0,m.iM)(r.onSubmit,["prevent","stop"]),onReset:(0,m.iM)(r.onReset,["prevent","stop"]),class:"q-gutter-md"},{default:(0,o.w5)((()=>[c,(0,o.Wm)(s,{inset:""}),(0,o.Wm)(n,{modelValue:r.correo,"onUpdate:modelValue":a[0]||(a[0]=e=>r.correo=e),label:"Correo",ref:"refCorreo",filled:"","lazy-rules":"",type:"email",rules:[e=>e&&e.length>0||"Porfavor ingrese el correo"],hint:"Email"},null,8,["modelValue","rules"]),(0,o.Wm)(n,{filled:"",modelValue:r.nombre,"onUpdate:modelValue":a[1]||(a[1]=e=>r.nombre=e),ref:"refNombre",label:"Nombre completo *",hint:"Nombre y apellido","lazy-rules":"",rules:[e=>e&&e.length>0||"Porfavor ingrese el nombre y apellido"]},null,8,["modelValue","rules"]),r.cambiarContraseña?((0,o.wg)(),(0,o.iD)("div",f,[(0,o.Wm)(n,{modelValue:r.contraseña,"onUpdate:modelValue":a[3]||(a[3]=e=>r.contraseña=e),filled:"","lazy-rules":"",ref:"refContraseña",label:"Contraseña *",type:r.esVisible?"password":"text",hint:"Ingrese la contraseña",rules:[e=>e&&e.length>0||"Porfavor ingrese una contraseña"],class:"q-mb-md"},{append:(0,o.w5)((()=>[(0,o.Wm)(u,{name:r.esVisible?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[2]||(a[2]=e=>r.esVisible=!r.esVisible)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,o.Wm)(n,{modelValue:r.reContraseña,"onUpdate:modelValue":a[5]||(a[5]=e=>r.reContraseña=e),filled:"",ref:"refReContraseña",error:!r.validarContraseña,"lazy-rules":"",label:"Repita la Contraseña *",type:r.esVisible?"password":"text",hint:"Debe coincidir con la contraseña",rules:[e=>e&&e.length>0||"Porfavor repita la contraseña"]},{append:(0,o.w5)((()=>[(0,o.Wm)(u,{name:r.esVisible?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[4]||(a[4]=e=>r.esVisible=!r.esVisible)},null,8,["name"])])),_:1},8,["modelValue","error","type","rules"])])):((0,o.wg)(),(0,o.j4)(g,{key:0,onLeft:r.onLeft,onRight:r.onRight},{left:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"done"})])),default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Wm)(v,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{color:"primary","text-color":"white",icon:"password"})])),_:1}),(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[p])),_:1})])),_:1})])),_:1},8,["onLeft","onRight"])),(0,o._)("div",null,[(0,o.Wm)(w,{label:"guardar",type:"submit",color:"positive",icon:"save"}),(0,o.Wm)(w,{label:"cancelar",type:"reset",color:"negative",flat:"",icon:"cancel",class:"q-ml-sm"})])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1},8,["modelValue"])}const b={name:"EditarUsuario",emits:["doneEditing"],props:{usuario:{type:Object,default(){return{id:"",nombre:"",contraseña:"",correo:""}}},editar:Boolean},setup(e,a){const l=(0,d.Z)(),r=(0,n.Z)(),i=(0,s.iH)(!1),t=(0,s.iH)(null),m=(0,s.iH)(null),c=(0,s.iH)(null),p=(0,s.iH)(null),f=(0,s.iH)(null),v=(0,s.iH)(null),b=(0,s.iH)(!0),g=(0,s.iH)(null),w=(0,s.iH)(null),y=(0,s.iH)(null),h=(0,s.iH)(!1),q=(0,o.Fl)((()=>c.value===p.value));(0,o.YP)((()=>e.editar),(()=>{h.value=e.editar,e.editar&&_()})),(0,o.YP)((()=>h.value),(()=>{h.value||a.emit("doneEditing")}));const W=function(){m.value="",c.value="",p.value="",f.value="",b.value=!0,h.value=!1},Z=()=>{},C=()=>{i.value=!i.value},_=()=>{m.value=e.usuario.name,f.value=e.usuario.email,t.value=e.usuario.id,i.value=!1},Q=async()=>{if(v.value.validate(),y.value.validate(),v.value.hasError||y.value.hasError)l.notify({color:"negative",message:"Datos incorrectos"});else{let a={name:m.value,email:f.value,id:t.value};c.value&&(a["password"]=c.value);try{await u.api.put(`/users/${a.id}`,a,r.authorizacion),l.notify({color:"positive",message:"Usuario Actualizado"}),W()}catch(e){console.log(e),l.notify({color:"negative",message:"Error al actualizar el usuario, mire la consola para mas informacion"})}}};return{id:t,nombre:m,correo:f,contraseña:c,reContraseña:p,refCorreo:y,refNombre:v,refContraseña:g,validarContraseña:q,refReContraseña:w,onLeft:C,resetForm:W,onReset(){W()},cargarPerfil:_,onSubmit:Q,onRight:Z,cambiarContraseña:i,modoEditar:h,esVisible:(0,s.iH)(!1)}}};var g=l(1639),w=l(2074),y=l(4458),h=l(8326),q=l(926),W=l(6611),Z=l(8713),C=l(2857),_=l(490),Q=l(1233),V=l(1357),k=l(4455),E=l(9984),H=l.n(E);const U=(0,g.Z)(b,[["render",v]]),z=U;H()(b,"components",{QDialog:w.Z,QCard:y.Z,QForm:h.Z,QSeparator:q.Z,QInput:W.Z,QSlideItem:Z.Z,QIcon:C.Z,QItem:_.Z,QItemSection:Q.Z,QAvatar:V.Z,QBtn:k.Z});const R=[{name:"email",label:"correo",field:"email"},{name:"name",label:"nombre",field:"name"},{name:"admi",label:"Tipo",field:e=>Boolean(e.admi)?"Administrador":"Usuario"}],I={name:"GestionDeUsuarios",components:{EditarUsuario:z},setup(){const e=(0,s.iH)(!1),a=(0,d.Z)(),l=(0,n.Z)(),r=(0,s.qj)([]),i=(0,s.qj)({data:null}),t=(0,s.iH)(0);(0,o.bv)((()=>{m()}));const m=async()=>{try{const e=await u.api.get("/users",l.authorizacion);e.data.users&&e.data.users.forEach((e=>{r.push(e)}))}catch(e){console.log(e),a.notify({color:"negative",message:"Error al cargar los usuarios, consulte la consola para mas informacion"})}},c=a=>{e.value=!0,i.data=a};return{columns:R,usuarios:r,usuario:i,cargarData:m,cargarPerfil:c,modoEditar:e,tipo:t,model:(0,s.iH)("Todes"),options:["Usuaries","Administradores","Todes"]}}};var D=l(1746),P=l(7887),S=l(1480),j=l(1821),x=l(3246),L=l(3115);const A=(0,g.Z)(I,[["render",t]]),B=A;H()(I,"components",{QTable:D.Z,QSelect:P.Z,QRadio:S.Z,QInput:W.Z,QIcon:C.Z,QCard:y.Z,QCardActions:j.Z,QBtn:k.Z,QSeparator:q.Z,QList:x.Z,QItem:_.Z,QItemSection:Q.Z,QItemLabel:L.Z})}}]);