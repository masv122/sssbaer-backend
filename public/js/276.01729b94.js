"use strict";(self["webpackChunksssbaer_front"]=self["webpackChunksssbaer_front"]||[]).push([[276],{9276:(e,a,t)=>{t.r(a),t.d(a,{default:()=>ge});var o=t(9835);function n(e,a,t,n,i,s){const l=(0,o.up)("header-admi"),r=(0,o.up)("menu-admi"),c=(0,o.up)("router-view"),d=(0,o.up)("menu-sticky-admi"),u=(0,o.up)("q-page-container"),m=(0,o.up)("q-layout");return(0,o.wg)(),(0,o.j4)(m,{view:"lHh Lpr fff",class:"bg-grey-1"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{onChangeDrawer:a[0]||(a[0]=e=>n.drawer=!n.drawer),nombre:n.sesion.data.user.name},null,8,["nombre"]),(0,o.Wm)(r,{drawer:n.drawer,onChangeDrawer:a[1]||(a[1]=e=>n.drawer=!n.drawer)},null,8,["drawer"]),(0,o.Wm)(u,{class:"GPL__page-container"},{default:(0,o.w5)((()=>[(0,o.Wm)(c),(0,o.Wm)(d)])),_:1})])),_:1})}var i=t(499),s=t(6183),l=t(8910),r=t(6970),c=t(1957),d=t(6561),u=t.n(d);const m=(0,o._)("img",{src:u(),class:"banner"},null,-1),p=(0,o._)("span",{class:"q-ml-sm"},"Asisteme BAER",-1),w={class:"q-gutter-sm row items-center no-wrap"},f=(0,o.Uk)(" No hay notificaciones "),g=(0,o.Uk)("Salir");function _(e,a,t,n,i,s){const l=(0,o.up)("q-btn"),d=(0,o.up)("q-icon"),u=(0,o.up)("q-toolbar-title"),_=(0,o.up)("q-space"),v=(0,o.up)("q-tooltip"),W=(0,o.up)("q-badge"),h=(0,o.up)("notis-comp"),b=(0,o.up)("q-banner"),y=(0,o.up)("q-card"),k=(0,o.up)("q-list"),q=(0,o.up)("q-menu"),Z=(0,o.up)("q-toolbar"),Q=(0,o.up)("q-header");return(0,o.wg)(),(0,o.j4)(Q,{elevated:"",class:"bg-white","height-hint":"64"},{default:(0,o.w5)((()=>[m,(0,o.Wm)(Z,{class:"bg-white text-negative",style:{height:"64px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{flat:"",dense:"",round:"",onClick:a[0]||(a[0]=a=>e.$emit("changeDrawer")),"aria-label":"Menu",icon:"menu",class:"q-mx-md"}),(0,o.Wm)(d,{name:"flight_takeoff",size:"3em"}),e.$q.screen.gt.sm?((0,o.wg)(),(0,o.j4)(u,{key:0,shrink:"",class:"row items-center no-wrap"},{default:(0,o.w5)((()=>[p])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(_),(0,o._)("div",w,[(0,o.Wm)(l,{round:"",dense:"",flat:"",icon:"person"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.nombre),1)])),_:1})])),_:1}),(0,o.Wm)(l,{round:"",dense:"",flat:"",icon:"notifications",onClick:n.readNotis},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(W,{color:"red","text-color":"white",floating:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(n.admiStore.notisSinLeer),1)])),_:1},512),[[c.F8,n.admiStore.notisSinLeer>0]]),(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[(0,o.Wm)(k,{style:{"min-width":"100px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(h),(0,o.Wm)(y,{class:"text-center no-shadow no-border"},{default:(0,o.w5)((()=>[n.admiStore.globalNotis.length>0?((0,o.wg)(),(0,o.j4)(l,{key:0,label:"limpiar",style:{"max-width":"120px !important"},flat:"",dense:"",class:"text-indigo-8",onClick:n.deleteNotis},null,8,["onClick"])):((0,o.wg)(),(0,o.j4)(b,{key:1,rounded:"",class:"bg-grey-3"},{default:(0,o.w5)((()=>[f])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1},8,["onClick"]),(0,o.Wm)(l,{round:"",dense:"",flat:"",onClick:a[1]||(a[1]=e=>n.cerrarSesion())},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"logout"}),(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[g])),_:1})])),_:1})])])),_:1})])),_:1})}var v=t(1446),W=t(1247),h=t(2176),b=t(4639),y=t(1569);const k={components:{NotisComp:h.Z},name:"HeaderAdmi",props:{nombre:{type:String,default:""}},setup(){const e=(0,s.Z)(),a=(0,v.Z)(),t=(0,l.tv)(),n=(0,W.o)(),i=async()=>{try{const o=await e.logout();o?t.push({name:"ingreso"}):a.notify({color:"negative",message:"Error al cerrar la sesion, consulte la consola para mas informacion"})}catch(o){console.log(o),a.notify({color:"negative",message:"Error al cerrar la sesion, consulte la consola para mas informacion"})}finally{t.push({name:"ingreso"})}},r=e=>{n.globalNotis.unshift(e)},c=async()=>{try{const t=await y.api.get("read-notis",e.authorizacion);t.data.success?n.notisSinLeer=0:a.notify({color:"negative",message:"Error al leer las notificaciones, consulte la consola para mas informacion"})}catch(t){console.log(t),a.notify({color:"negative",message:"Error al leer las notificaciones, consulte la consola para mas informacion"})}},d=async()=>{try{const t=await y.api.get("/delete-notis",e.authorizacion);t.data.success?n.globalNotis.length=0:a.notify({color:"negative",message:"Error al eliminar las notificaciones, consulte la consola para mas informacion"})}catch(t){console.log(t),a.notify({color:"negative",message:"Error al eliminar las notificaciones, consulte la consola para mas informacion"})}};return(0,o.bv)((async()=>{try{b.apiEvents.Echo.channel("SolicitudEnviada").listen("SolicitudEnviada",(e=>{r(e),console.log(e),e.solicitud.name=e.user.name,n.solicitudes.push(e.solicitud),a.notify({message:`${e.user.name} ha enviado una nueva solicitud.`,icon:"announcement",position:"top-right",color:"positive"})})),b.apiEvents.Echo.channel("EstadoActualizado").listen("EstadoActualizado",(t=>{const o=n.solicitudes.findIndex((e=>e.id==t.solicitud.id));n.solicitudes[o]=t.solicitud,t.solicitud.idAdministrador!=e.data.user.id&&a.notify({color:"info",icon:"info",position:"top-right",message:`${t.user.name} ha ${t.tipo} una solicitud.`})})),b.apiEvents.Echo["private"]("App.Models.User."+e.data.user.id).notification((e=>{r({data:e}),n.notisSinLeer++}));const t=await y.api.get("/notis",e.authorizacion),o=t.data;o.length>0&&o.forEach((e=>{e.read_at||n.notisSinLeer++,r(e)}))}catch(t){console.log(t),a.notify({color:"negative",icon:"info",message:"No se ha podido conectar al servidor de websockets, consulte la consola para mas informacion"})}})),{cerrarSesion:i,admiStore:n,readNotis:c,deleteNotis:d}}};var q=t(1639),Z=t(6602),Q=t(1663),S=t(4455),x=t(2857),L=t(1973),A=t(136),z=t(6858),E=t(990),G=t(6362),P=t(3246),C=t(4458),U=t(7128),j=t(9984),I=t.n(j);const M=(0,q.Z)(k,[["render",_]]),N=M;I()(k,"components",{QHeader:Z.Z,QToolbar:Q.Z,QBtn:S.Z,QIcon:x.Z,QToolbarTitle:L.Z,QSpace:A.Z,QTooltip:z.Z,QBadge:E.Z,QMenu:G.Z,QList:P.Z,QCard:C.Z,QBanner:U.Z});const D=(0,o._)("span",{class:"q-ml-sm"},"Asisteme BAER",-1),B=(0,o.Uk)("Solicitudes"),H=(0,o.Uk)("Atendidas por mi"),T=(0,o.Uk)("Gestion de cuentas");function $(e,a,t,n,i,s){const l=(0,o.up)("q-toolbar-title"),c=(0,o.up)("q-toolbar"),d=(0,o.up)("q-separator"),u=(0,o.up)("q-icon"),m=(0,o.up)("q-item-section"),p=(0,o.up)("q-item-label"),w=(0,o.up)("q-item"),f=(0,o.up)("q-list"),g=(0,o.up)("q-scroll-area"),_=(0,o.up)("q-drawer"),v=(0,o.Q2)("ripple");return(0,o.wg)(),(0,o.j4)(_,{modelValue:n.drawerModel,"onUpdate:modelValue":a[0]||(a[0]=e=>n.drawerModel=e),bordered:"",behavior:"mobile"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"fit"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"GPL__toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{class:"row items-center text-grey-8"},{default:(0,o.w5)((()=>[D])),_:1})])),_:1}),(0,o.Wm)(f,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"q-my-md"}),(0,o.wy)(((0,o.wg)(),(0,o.j4)(w,{"active-class":"text-negative",clickable:"",class:"GPL__drawer-item",to:{name:"solicitudes admi"}},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"view_list",color:"negative"})])),_:1}),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[B])),_:1})])),_:1})])),_:1})),[[v]]),(0,o.Wm)(d,{class:"q-my-md"}),(0,o.wy)(((0,o.wg)(),(0,o.j4)(w,{"active-class":"text-negative",clickable:"",class:"GPL__drawer-item",to:{name:"solicitudes realizadas admi"}},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"checklist",color:"negative"})])),_:1}),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[H])),_:1})])),_:1})])),_:1})),[[v]]),(0,o.Wm)(d,{class:"q-my-md"}),(0,o.wy)(((0,o.wg)(),(0,o.j4)(w,{"active-class":"text-negative",clickable:"",class:"GPL__drawer-item",to:{name:"gestion de cuentas"}},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"manage_accounts",color:"negative"})])),_:1}),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[T])),_:1})])),_:1})])),_:1})),[[v]]),(0,o.Wm)(d,{class:"q-my-md"}),(0,o.Wm)(w,{disable:"",class:"GPL__drawer-item"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(n.user.name),1)])),_:1}),(0,o.Wm)(m,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{color:"negative",name:"person"})])),_:1})])),_:1}),(0,o.Wm)(w,{disable:"",class:"GPL__drawer-item"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(n.user.email),1)])),_:1}),(0,o.Wm)(m,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{color:"negative",name:"email"})])),_:1})])),_:1}),(0,o.Wm)(w,{disable:"",class:"GPL__drawer-item"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Uk)("ID: "+(0,r.zw)(n.user.id),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}const F={name:"MenuAdmi",emits:["changeDrawer"],props:{drawer:{type:Boolean,default:!1}},setup(e,a){const t=(0,s.Z)(),n=(0,o.Fl)((()=>t.data.user?t.data.user:"")),i=(0,o.Fl)({get(){return e.drawer},set(e){a.emit("changeDrawer")}});return{user:n,drawerModel:i}}};var R=t(906),V=t(6663),Y=t(926),J=t(490),K=t(1233),O=t(3115),X=t(1136);const ee=(0,q.Z)(F,[["render",$]]),ae=ee;I()(F,"components",{QDrawer:R.Z,QScrollArea:V.Z,QToolbar:Q.Z,QToolbarTitle:L.Z,QList:P.Z,QSeparator:Y.Z,QItem:J.Z,QItemSection:K.Z,QIcon:x.Z,QItemLabel:O.Z}),I()(F,"directives",{Ripple:X.Z});const te={class:"fit q-pt-xl q-px-sm column"},oe=(0,o._)("div",{class:"GPL__side-btn__label"},"Solicitudes",-1),ne=(0,o._)("div",{class:"GPL__side-btn__label"},"Atendidas por mi",-1),ie=(0,o._)("div",{class:"GPL__side-btn__label"},"Gestion de cuentas",-1),se=(0,o.Uk)("> ");function le(e,a,t,n,i,s){const l=(0,o.up)("q-icon"),c=(0,o.up)("q-btn"),d=(0,o.up)("q-badge"),u=(0,o.up)("q-page-sticky");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.$q.screen.gt.sm?((0,o.wg)(),(0,o.j4)(u,{key:0,expand:"",position:"left"},{default:(0,o.w5)((()=>[(0,o._)("div",te,[(0,o.Wm)(c,{round:"",flat:"",color:"grey-8",stack:"","no-caps":"",size:"26px",class:"GPL__side-btn",to:{name:"solicitudes admi"}},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{size:"22px",name:"view_list"}),oe])),_:1}),(0,o.Wm)(c,{round:"",flat:"",color:"grey-8",stack:"","no-caps":"",size:"26px",class:"GPL__side-btn",to:{name:"solicitudes realizadas admi"}},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{size:"22px",name:"checklist"}),ne,(0,o.Wm)(d,{floating:"",color:"red","text-color":"white",style:{top:"8px",right:"16px"},onClick:a[0]||(a[0]=a=>e.notificacionSolicitudesAdmi=0)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.notificacionSolicitudesAdmi),1)])),_:1})])),_:1}),(0,o.Wm)(c,{round:"",flat:"",color:"grey-8",stack:"","no-caps":"",size:"26px",class:"GPL__side-btn",to:{name:"gestion de cuentas"}},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{size:"22px",name:"manage_accounts"}),ie])),_:1})])])),_:1})):(0,o.kq)("",!0),se],64)}const re={name:"MenuStickyAdmi",setup(){return{}}};var ce=t(627);const de=(0,q.Z)(re,[["render",le]]),ue=de;I()(re,"components",{QPageSticky:ce.Z,QBtn:S.Z,QIcon:x.Z,QBadge:E.Z});const me={components:{MenuStickyAdmi:ue,HeaderAdmi:N,MenuAdmi:ae},name:"AdministradorLayout",setup(){const e=(0,i.iH)(!1),a=(0,i.iH)(0),t=(0,i.iH)(""),o=(0,s.Z)();(0,l.tv)();function n(){e.value=!e.value}return{drawer:e,search:t,sesion:o,notificacionSolicitudesAdmi:a,toggleLeftDrawer:n}}};var pe=t(249),we=t(2133);const fe=(0,q.Z)(me,[["render",n]]),ge=fe;I()(me,"components",{QLayout:pe.Z,QPageContainer:we.Z,QItem:J.Z,QIcon:x.Z})}}]);