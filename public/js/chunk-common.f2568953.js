(self["webpackChunksssbaer_front"]=self["webpackChunksssbaer_front"]||[]).push([[64],{1247:(e,a,o)=>{"use strict";o.d(a,{o:()=>n});var t=o(2502),i=o(1569),s=o(6183);const r=(0,s.Z)(),n=(0,t.Q_)("admiStore",{state:()=>({solicitudes:[],misSolicitudes:[],globalNotis:[],notisSinLeer:0,admiNotis:0,usuarios:[],solicitudesEnProcesoOCompletadas:[]}),getters:{usuariosTrabajadores:e=>e.usuarios.filter((e=>0===e.admi)),usuariosAdministradores:e=>e.usuarios.filter((e=>1===e.admi)),solicitudesSinAtender:e=>e.solicitudes.filter((e=>!e.enProceso&&!e.terminado)),solicitudesAtendidas:e=>e.solicitudes.filter((e=>e.enProceso&&!e.terminado)),solicitudesCompletadas:e=>e.solicitudes.filter((e=>!e.enProceso&&e.terminado)),solicitudesCompletadasSupervisor:e=>e.solicitudesEnProcesoOCompletadas.filter((e=>Boolean(e.terminado))),getUserById:e=>a=>e.usuarios.find((e=>e.id===a))},actions:{async cargarSolicitudes(){try{this.solicitudes.length=0;const e=await i.api.get("/solicitudes",r.authorizacion),a=e.data.solicitudes;a.forEach((e=>{e.terminado||this.solicitudes.push(e)}))}catch(e){console.log(e)}},async cargarMisSolicitudes(){try{this.misSolicitudes.length=0;const e=await i.api.post("/solicitudes-admi",{id:r.data.user.id},r.authorizacion),a=e.data.solicitudes;a.forEach((e=>{this.misSolicitudes.push(e)}))}catch(e){console.log(e)}},async cargarTodasLasSolicitudes(){try{this.solicitudes.length=0;const e=await i.api.get("/solicitudes",r.authorizacion),a=e.data.solicitudes;a.forEach((e=>{this.solicitudes.push(e)}))}catch(e){console.log(e)}},async cargarSolicitudesEnProcesoOCompletadas(){try{this.solicitudesEnProcesoOCompletadas.length=0;const e=await i.api.get("/solicitudes-supervisor",r.authorizacion),a=e.data.solicitudes;a.forEach((e=>{this.solicitudesEnProcesoOCompletadas.push(e)}))}catch(e){console.log(e)}},async cargarUsuarios(){try{this.usuarios.length=0;const e=await i.api.get("/users",r.authorizacion),a=e.data.users;a.forEach((e=>{this.usuarios.push(e)}))}catch(e){console.log(e)}},async cambiarProceso(e){try{e.enProceso&&(e.idAdministrador=r.data.user.id),e.terminado||e.enProceso||(e.idAdministrador=""),await i.api.put(`/solicitudes/${e.id}`,e,r.authorizacion)}catch(a){console.log(a)}},async getAdmi(e){try{return i.api.get(`/users/${e}`,r.authorizacion)}catch(a){return console.log(a),"error al localizar el administrador"}}}})},5255:(e,a,o)=>{"use strict";o.d(a,{Z:()=>f});var t=o(9835),i=o(6970);const s={class:"q-ml-xs"};function r(e,a,o,r,n,c){const l=(0,t.up)("q-card-actions");return(0,t.wg)(),(0,t.j4)(l,null,{default:(0,t.w5)((()=>[(0,t._)("div",s," Solicitud atendida por: "+(0,i.zw)(r.administrador.data?" "+r.administrador.data.name:""),1)])),_:1})}var n=o(499),c=o(1247),l=o(1446);const d={name:"AdministradorComp",props:{id:[Number,String]},setup(e){const a=(0,n.qj)({data:null}),o=(0,l.Z)(),i=(0,c.o)();return(0,t.bv)((async()=>{if(e.id)try{const o=await i.getAdmi(e.id);a.data=o.data[0]}catch(t){console.log(t),o.notify({color:"negative",message:"ha ocurrido un error al buscar el administrador, para mas informacion consulte la consola"})}})),(0,t.YP)((()=>e.id),(async()=>{try{if(e.id){const o=await i.getAdmi(e.id);a.data=o.data[0]}else a.data=null}catch(t){console.log(t),o.notify({color:"negative",message:"ha ocurrido un error al buscar el administrador, para mas informacion consulte la consola"})}})),{administrador:a}}};var u=o(1639),m=o(1821),p=o(9984),g=o.n(p);const w=(0,u.Z)(d,[["render",r]]),f=w;g()(d,"components",{QCardActions:m.Z})},2051:(e,a,o)=>{"use strict";o.d(a,{Z:()=>b});var t=o(9835),i=o(6970);function s(e,a,o,s,r,n){const c=(0,t.up)("q-icon"),l=(0,t.up)("q-avatar"),d=(0,t.up)("q-item-section"),u=(0,t.up)("q-item-label"),m=(0,t.up)("q-item"),p=(0,t.Q2)("ripple");return(0,t.wg)(),(0,t.iD)("div",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.admiStore.globalNotis,((e,a)=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(m,{style:{"max-width":"420px"},key:a,clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(l,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{name:Boolean(e.user.admi)?"engineering":"person"},null,8,["name"])])),_:2},1024)])),_:2},1024),(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.user.name),1)])),_:2},1024),(0,t.Wm)(u,{caption:"",lines:"1"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.text),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(d,{side:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.hora),1)])),_:2},1024)])),_:2},1024)),[[p]]))),128))])}var r=o(1247);const n=(0,t.aZ)({name:"NotisComp",setup(){const e=(0,r.o)();return{admiStore:e}}});var c=o(1639),l=o(490),d=o(1233),u=o(1357),m=o(2857),p=o(3115),g=o(1136),w=o(9984),f=o.n(w);const h=(0,c.Z)(n,[["render",s]]),b=h;f()(n,"components",{QItem:l.Z,QItemSection:d.Z,QAvatar:u.Z,QIcon:m.Z,QItemLabel:p.Z}),f()(n,"directives",{Ripple:g.Z})},8227:(e,a,o)=>{"use strict";o.r(a),o.d(a,{default:()=>E});var t=o(9835);function i(e,a,o,i,s,r){const n=(0,t.up)("q-icon"),c=(0,t.up)("q-space"),l=(0,t.up)("q-btn"),d=(0,t.up)("solicitud-item-admi"),u=(0,t.up)("q-table");return(0,t.wg)(),(0,t.j4)(u,{title:"Mis solicitudes",rows:i.admiStore.solicitudes,columns:i.columns,"row-key":"id",grid:"","hide-header":""},{top:(0,t.w5)((()=>[(0,t.Wm)(n,{name:"view_list",color:"negative",size:"3em"}),(0,t.Wm)(c),(0,t.Wm)(l,{class:"glossy",round:"",color:"negative",icon:"refresh",onClick:a[0]||(a[0]=e=>i.admiStore.cargarSolicitudes())})])),item:(0,t.w5)((e=>[(0,t.Wm)(d,{data:e,supervisor:o.supervisor,onCambiarProceso:i.cambiarProceso,onCompletarSolicitud:i.completarSolicitud},null,8,["data","supervisor","onCambiarProceso","onCompletarSolicitud"])])),_:1},8,["rows","columns"])}var s=o(6183),r=o(1247),n=(o(4639),o(1446)),c=o(6970),l=o(1957);const d={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition"};function u(e,a,o,i,s,r){const n=(0,t.up)("q-icon"),u=(0,t.up)("q-breadcrumbs-el"),m=(0,t.up)("q-breadcrumbs"),p=(0,t.up)("q-card-section"),g=(0,t.up)("q-btn"),w=(0,t.up)("q-card-actions"),f=(0,t.up)("q-separator"),h=(0,t.up)("q-item-label"),b=(0,t.up)("q-item-section"),v=(0,t.up)("q-item"),y=(0,t.up)("q-list"),Z=(0,t.up)("administrador-comp"),C=(0,t.up)("q-card");return(0,t.wg)(),(0,t.iD)("div",d,[(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[o.data.row.idAdministrador&&o.data.row.idAdministrador!=i.sesion.data.user.id||o.supervisor?((0,t.wg)(),(0,t.j4)(p,{key:0},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"text-grey"},{separator:(0,t.w5)((()=>[(0,t.Wm)(n,{size:"1.5em",name:"chevron_right",color:"negative"})])),default:(0,t.w5)((()=>[(0,t.Wm)(u,{icon:"hourglass_empty",class:(0,c.C_)(o.data.row.enProceso?"text-negative":"")},null,8,["class"]),(0,t.Wm)(u,{icon:"check_circle",class:(0,c.C_)(o.data.row.terminado?"text-negative":"")},null,8,["class"]),(0,t.Wm)(u,{icon:"verified"})])),_:1})])),_:1})):((0,t.wg)(),(0,t.j4)(w,{key:1,align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(g,{outline:!!o.data.row.enProceso,color:o.data.row.enProceso?"negative":"primary",label:o.data.row.enProceso?"rechazar":"Aceptar",onClick:a[0]||(a[0]=a=>e.$emit("cambiarProceso",o.data.row,o.data.rowIndex))},null,8,["outline","color","label"]),[[l.F8,!o.data.row.enProceso&&!o.data.row.terminado||o.data.row.enProceso&&!o.data.row.terminado]]),(0,t.wy)((0,t.Wm)(g,{color:"green",label:"Completar","checked-icon":"check",disable:!!o.data.row.terminado,"unchecked-icon":"clear",onClick:a[1]||(a[1]=a=>e.$emit("completarSolicitud",o.data.row,o.data.rowIndex))},null,8,["disable"]),[[l.F8,!!o.data.row.enProceso||!!o.data.row.terminado]])])),_:1})),(0,t.Wm)(f),(0,t.Wm)(y,{dense:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.data.cols,(e=>((0,t.wg)(),(0,t.j4)(v,{key:e.name},{default:(0,t.w5)((()=>[(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.Wm)(h,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.label),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(b,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.value),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,t.Wm)(f),(0,t.wy)((0,t.Wm)(Z,{id:o.data.row.idAdministrador},null,8,["id"]),[[l.F8,!!o.data.row.enProceso]])])),_:1})])}var m=o(5255);const p={components:{AdministradorComp:m.Z},name:"SolicitudItemAdmi",props:{data:Object,supervisor:{type:Boolean,default:!1}},setup(){const e=(0,s.Z)();return{sesion:e}}};var g=o(1639),w=o(4458),f=o(3190),h=o(2605),b=o(2857),v=o(8052),y=o(1821),Z=o(4455),C=o(926),_=o(3246),P=o(490),S=o(1233),q=o(3115),W=o(9984),k=o.n(W);const Q=(0,g.Z)(p,[["render",u]]),x=Q;k()(p,"components",{QCard:w.Z,QCardSection:f.Z,QBreadcrumbs:h.Z,QIcon:b.Z,QBreadcrumbsEl:v.Z,QCardActions:y.Z,QBtn:Z.Z,QSeparator:C.Z,QList:_.Z,QItem:P.Z,QItemSection:S.Z,QItemLabel:q.Z});const A=[{name:"id",label:"ID",field:"id"},{name:"coordinacion",label:"Coordinacion",field:"coordinacion"},{name:"problema",label:"Tipo de problema",field:"problema"},{name:"comentarioAdicional",label:"Informacion adicional",field:"comentarioAdicional"},{name:"name",label:"Nombre",field:"name"}],I={components:{SolicitudItemAdmi:x},props:{supervisor:{type:Boolean,default:!1}},setup(e){const a=(0,s.Z)(),o=(0,n.Z)(),i=(0,r.o)(),c=async(e,a)=>{try{e.enProceso=!e.enProceso,e.enProceso?(e.razonCancelado=null,await i.cambiarProceso(e)):o.dialog({title:"Has cancelado una solicitud",message:"¿Porque cancelaste la solicitud?",prompt:{model:"",isValid:e=>e.length>2,type:"text"},cancel:!0,persistent:!0}).onOk((async a=>{e.razonCancelado=a,await i.cambiarProceso(e)})).onCancel((()=>{i.solicitudes[a].enProceso=!e.enProceso}))}catch(t){console.log(t),o.notify({color:"negative",message:"Error al cambiar el estado de la solicitud, consulte la consola para mas informacion"})}},l=async(e,a)=>{try{e.enProceso=!e.enProceso,e.terminado=!e.terminado,e.terminado&&o.dialog({title:"Completar solicitud",message:"Indica tus observaciones",prompt:{model:"",isValid:e=>e.length>2,type:"text"},cancel:!0,persistent:!0}).onOk((async a=>{e.observacionesAlCompletar=a,await i.cambiarProceso(e)})).onCancel((()=>{i.solicitudes[a].enProceso=!e.enProceso,i.solicitudes[a].terminado=!e.terminado}))}catch(t){console.log(t),o.notify({color:"negative",message:"Error al cambiar el estado de la solicitud, consulte la consola para mas informacion"})}};return(0,t.bv)((async()=>{try{e.supervisor?await i.cargarTodasLasSolicitudes():await i.cargarSolicitudes()}catch(a){console.log(a),o.notify({color:"negative",icon:"info",message:"No se ha podido cargar las solicitudes, consulte la consola para mas informacion"})}})),{sesion:a,columns:A,admiStore:i,cambiarProceso:c,completarSolicitud:l}}};var z=o(1746),V=o(136);const B=(0,g.Z)(I,[["render",i]]),E=B;k()(I,"components",{QTable:z.Z,QIcon:b.Z,QSpace:V.Z,QBtn:Z.Z})},2488:(e,a,o)=>{"use strict";o.r(a),o.d(a,{default:()=>I});var t=o(9835);const i=(0,t._)("img",{src:"https://pbs.twimg.com/media/B33SGbYIMAAhrVR.png",style:{width:"200px",height:"100px"},class:"q-mb-lg"},null,-1);function s(e,a,o,s,r,n){const c=(0,t.up)("login-comp"),l=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(l,{padding:"",class:"fit column wrap justify-start items-center content-center bg-blue-grey-1"},{default:(0,t.w5)((()=>[i,(0,t.Wm)(c)])),_:1})}var r=o(1957);const n={class:"q-pa-md"},c=(0,t._)("div",{class:"text-h5 text-center text-negative q-mb-lg"},"Ingreso",-1),l=(0,t.Uk)(" Si olvido su contraseña debera ir a la coordinacion de TIC para recuperarla ");function d(e,a,o,i,s,d){const u=(0,t.up)("q-input"),m=(0,t.up)("q-icon"),p=(0,t.up)("q-checkbox"),g=(0,t.up)("q-btn"),w=(0,t.up)("q-banner"),f=(0,t.up)("q-form"),h=(0,t.up)("q-card-section"),b=(0,t.up)("q-card");return(0,t.wg)(),(0,t.j4)(b,{flat:"",bordered:"",style:{width:"400px",height:"420px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t.Wm)(f,{onSubmit:(0,r.iM)(i.onSubmit,["prevent","stop"]),class:"q-gutter-sm"},{default:(0,t.w5)((()=>[c,(0,t.Wm)(u,{color:"negative",ref:"refcorreo",modelValue:i.correo,"onUpdate:modelValue":a[0]||(a[0]=e=>i.correo=e),label:"Correo","lazy-rules":"",rules:[e=>e&&e.length>0||"Porfavor ingrese el correo"]},null,8,["modelValue","rules"]),(0,t.Wm)(u,{color:"negative",modelValue:i.contraseña,"onUpdate:modelValue":a[2]||(a[2]=e=>i.contraseña=e),"lazy-rules":"",ref:"refContraseña",label:"Contraseña",type:i.esVisible?"password":"text",rules:[e=>e&&e.length>0||"Porfavor ingrese una contraseña"]},{append:(0,t.w5)((()=>[(0,t.Wm)(m,{name:i.esVisible?"visibility":"visibility_off",class:"cursor-pointer",onClick:a[1]||(a[1]=e=>i.esVisible=!i.esVisible)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,t.Wm)(p,{color:"negative",modelValue:i.recordar,"onUpdate:modelValue":a[3]||(a[3]=e=>i.recordar=e),label:"Recordar sesion","checked-icon":"task_alt","unchecked-icon":"highlight_off"},null,8,["modelValue"]),(0,t._)("div",null,[(0,t.Wm)(g,{label:"Ingresar",type:"submit",class:"full-width",color:"negative"})]),(0,t.Wm)(w,{rounded:"",class:"bg-grey-3"},{avatar:(0,t.w5)((()=>[(0,t.Wm)(m,{name:"contact_support",color:"primary"})])),default:(0,t.w5)((()=>[l])),_:1})])),_:1},8,["onSubmit"])])])),_:1})])),_:1})}var u=o(499),m=o(1446),p=o(8910),g=(o(1569),o(6183));const w={name:"LoginComp",setup(){const e=(0,m.Z)(),a=(0,u.iH)(""),o=(0,u.iH)(""),t=(0,u.iH)(""),i=(0,u.iH)(""),s=(0,u.iH)(!0),r=(0,g.Z)(),n=(0,p.tv)(),c=(0,u.iH)(!1);return{correo:a,refcorreo:o,contraseña:t,refContraseña:i,esVisible:s,recordar:c,async onSubmit(){try{if(o.value.hasError||i.value.hasError)e.notify({color:"negative",message:"Complete los datos"});else{const o=await r.login(a.value,t.value);o?(c.value?e.cookies.set("token",r.data.token,{sameSite:"Lax"}):e.cookies.remove("token"),Boolean(r.data.user.admi)||Boolean(r.data.user.supervisor)?Boolean(r.data.user.admi)?n.push({name:"administrador"}):Boolean(r.data.user.supervisor)&&n.push({name:"supervisor"}):n.push({name:"usuario"})):e.notify({type:"warning",message:"Usuario/Contraseña invalidas"})}}catch(s){console.log(s)}}}}};var f=o(1639),h=o(4458),b=o(3190),v=o(8326),y=o(6611),Z=o(2857),C=o(1221),_=o(4455),P=o(7128),S=o(9984),q=o.n(S);const W=(0,f.Z)(w,[["render",d]]),k=W;q()(w,"components",{QCard:h.Z,QCardSection:b.Z,QForm:v.Z,QInput:y.Z,QIcon:Z.Z,QCheckbox:C.Z,QBtn:_.Z,QBanner:P.Z});const Q={name:"IngresoLayout",components:{LoginComp:k},setup(){return{}}};var x=o(9885);const A=(0,f.Z)(Q,[["render",s]]),I=A;q()(Q,"components",{QPage:x.Z})},6561:(e,a,o)=>{e.exports=o.p+"img/banner_oficial.8849eeaf.png"}}]);