"use strict";(self["webpackChunksssbaer_front"]=self["webpackChunksssbaer_front"]||[]).push([[881],{3881:(o,e,a)=>{a.r(e),a.d(e,{default:()=>Q});var i=a(9835),l=a(6970),c=a(1957);const n={class:"q-pa-md"},s=(0,i.Uk)(" Cancelar solicitud "),r=(0,i.Uk)(" Completar solicitud "),t=(0,i.Uk)(" La solicitud ha sido completada "),d=(0,i.Uk)(" La solicitud fue marcada como completada por el usuario que la envio ");function m(o,e,a,m,u,p){const w=(0,i.up)("q-icon"),f=(0,i.up)("q-space"),b=(0,i.up)("q-btn"),k=(0,i.up)("q-th"),g=(0,i.up)("q-tr"),h=(0,i.up)("q-tooltip"),v=(0,i.up)("q-td"),P=(0,i.up)("q-table");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i.Wm)(P,{title:"Mis solicitudes",rows:m.admiStore.misSolicitudes,columns:m.columns,"row-key":"id"},{top:(0,i.w5)((()=>[(0,i.Wm)(w,{name:"checklist",color:"negative",size:"3em"}),(0,i.Wm)(f),(0,i.Wm)(b,{class:"glossy",round:"",color:"negative",icon:"refresh",onClick:e[0]||(e[0]=o=>m.cargarMisSolicitudes())})])),header:(0,i.w5)((o=>[(0,i.Wm)(g,{props:o},{default:(0,i.w5)((()=>[(0,i.Wm)(k,{"auto-width":""}),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.cols,(e=>((0,i.wg)(),(0,i.j4)(k,{key:e.name,props:o},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,i.w5)((o=>[(0,i.Wm)(g,{props:o},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{"auto-width":""},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(b,{round:"",flat:"",color:"negative",icon:"cancel",class:"q-mr-md",onClick:e=>m.cambiarProceso(o.row,o.rowIndex)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[s])),_:1})])),_:2},1032,["onClick"]),[[c.F8,!o.row.enProceso&&!o.row.terminado||o.row.enProceso&&!o.row.terminado]]),(0,i.wy)((0,i.Wm)(b,{flat:"",round:"",color:"green",icon:"check",modelValue:o.row.terminado,"onUpdate:modelValue":e=>o.row.terminado=e,"checked-icon":"check",disable:!!o.row.terminado,"unchecked-icon":"clear",onClick:e=>m.completarSolicitud(o.row,o.rowIndex)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[r])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue","disable","onClick"]),[[c.F8,!!o.row.enProceso]]),(0,i.wy)((0,i.Wm)(w,{name:"check_circle_outline",color:"positive",size:"2em"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[t])),_:1})])),_:2},1536),[[c.F8,Boolean(o.row.terminado)&&!Boolean(o.row.confirmada)]]),(0,i.wy)((0,i.Wm)(w,{name:"verified",color:"positive",size:"2em"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[d])),_:1})])),_:2},1536),[[c.F8,Boolean(o.row.confirmada)]])])),_:2},1024),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.cols,(e=>((0,i.wg)(),(0,i.j4)(v,{key:e.name,props:o},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.value),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])}var u=a(499),p=a(1247),w=a(4639),f=a(1446);const b=[{name:"id",label:"ID",field:"id"},{name:"nombre",label:"Nombre",field:"nombre"},{name:"coordinacion",label:"Coordinacion",field:"coordinacion"},{name:"problema",label:"Tipo de problema",field:"problema"},{name:"comentarioAdicional",label:"Informacion adicional",field:"comentarioAdicional"},{name:"observacionesAlCompletar",label:"Observaciones",field:"observacionesAlCompletar"}],k={setup(){const o=(0,p.o)(),e=(0,f.Z)(),a=(0,u.qj)([]),l=(a,i)=>{a.enProceso=!a.enProceso,a.enProceso?o.cambiarProceso(a):e.dialog({title:"Has cancelado una solicitud",message:"Â¿Porque cancelaste la solicitud?",prompt:{model:"",isValid:o=>o.length>2,type:"text"},cancel:!0,persistent:!0}).onOk((e=>{a.razonCancelado=e,o.cambiarProceso(a)})).onCancel((()=>{o.misSolicitudes[i].enProceso=!a.enProceso}))},c=(a,i)=>{a.enProceso=!a.enProceso,a.terminado=!a.terminado,a.terminado&&e.dialog({title:"Completar solicitud",message:"Indica tus observaciones",prompt:{model:"",isValid:o=>o.length>2,type:"text"},cancel:!0,persistent:!0}).onOk((e=>{a.observacionesAlCompletar=e,o.cambiarProceso(a)})).onCancel((()=>{o.misSolicitudes[i].enProceso=!a.enProceso,o.misSolicitudes[i].terminado=!a.terminado}))},n=async()=>{try{await o.cargarMisSolicitudes()}catch(a){console.log(a),e.notify({color:"negative",icon:"info",message:"No se ha podido cargar las solocitudes, para mas informacion  revise la consola"})}};return(0,i.bv)((async()=>{try{await n(),w.apiEvents.Echo.channel("EstadoActualizado").listen("EstadoActualizado",(e=>{const a=o.solicitudes.findIndex((o=>o.id==e.solicitud.id));o.solicitudes[a]=e.solicitud}))}catch(a){console.log(a),e.notify({color:"negative",icon:"info",message:"No se ha podido conectar al servidor de websockets"})}})),{columns:b,solicitudes:a,admiStore:o,cambiarProceso:l,completarSolicitud:c,cargarMisSolicitudes:n}}};var g=a(1639),h=a(1746),v=a(2857),P=a(136),_=a(4455),y=a(9546),C=a(1682),W=a(7220),q=a(6858),S=a(9984),Z=a.n(S);const z=(0,g.Z)(k,[["render",m]]),Q=z;Z()(k,"components",{QTable:h.Z,QIcon:v.Z,QSpace:P.Z,QBtn:_.Z,QTr:y.Z,QTh:C.Z,QTd:W.Z,QTooltip:q.Z})}}]);