"use strict";(self["webpackChunksssbaer_front"]=self["webpackChunksssbaer_front"]||[]).push([[509],{6509:(e,t,a)=>{a.r(t),a.d(t,{default:()=>de});var o=a(9835);const l={class:"row"};function i(e,t,a,i,s,n){const d=(0,o.up)("asistencias-completadas-efectivamente"),c=(0,o.up)("admis-list"),r=(0,o.up)("admi-detail"),m=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(m,{class:"q-pa-sm bg-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(d),(0,o._)("div",l,[(0,o.Wm)(c,{onUpdateSelectedAdmi:t[0]||(t[0]=e=>i.id=e),class:"col-lg-4 col-md-4 col-sm-12 col-xs-12"}),(0,o.Wm)(r,{id:i.id,class:"col-lg-8 col-md-8 col-sm-12 col-xs-12"},null,8,["id"])])])),_:1})}const s={id:"chart"};function n(e,t,a,l,i,n){const d=(0,o.up)("apexchart");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(d,{type:"bar",height:"350",options:l.chartOptions,series:l.series},null,8,["options","series"])])}var d=a(499),c=a(1247);const r={name:"AsistenciasCompletadasEfectivamente",mounted(){this.$nextTick((()=>{window.dispatchEvent(new Event("resize"))}))},setup(){const e=(0,c.o)(),t=(0,d.qj)([]),a=(0,d.qj)([]);(0,o.bv)((()=>{let o=[];const s=l(e.solicitudesCompletadasSupervisor);s.forEach((e=>{t.push({name:e.id,data:[]});let a=e.solicitudes;e.solicitudes=i(a),e.solicitudes.forEach((e=>o.push(e.day)))})),o.filter(((e,t)=>o.indexOf(e)===t)).forEach((e=>a.push(e))),t.forEach((t=>{a.forEach((a=>{t.data.push(e.solicitudesCompletadasSupervisor.filter((e=>new Date(e.created_at).toLocaleString("default",{day:"2-digit",month:"short"})===a&&e.idAdministrador==t.name)).length)}));const o=e.usuarios.filter((e=>t.name==e.id))[0].name;t.name=o}))}));const l=e=>{let t=[];return e.reduce(((e,a)=>{let o=a.admiID;return e[o]||(e[o]={id:a.admiID,nombre:a.admiName,solicitudes:[]},t.push(e[o])),o===e[o].id&&e[o].solicitudes.push(a),e}),{}),t},i=e=>{let t=[];return e.reduce(((e,a)=>{let o=new Date(a.created_at).toLocaleString("default",{day:"2-digit",month:"short"});return e[o]||(e[o]={day:o,solicitudes:[]},t.push(e[o])),o===e[o].day&&e[o].solicitudes.push(a),e}),{}),t};return{series:t,chartOptions:{chart:{type:"bar",height:350,stacked:!0,stackType:"100%"},responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],xaxis:{categories:a},fill:{opacity:1},legend:{position:"right",offsetX:0,offsetY:50}}}}};var m=a(1639);const u=(0,m.Z)(r,[["render",n]]),p=u;var f=a(6970);const h=["onClick"],b=(0,o.Uk)("TOP TRABAJADORES"),w=["onClick"];function g(e,t,a,l,i,s){const n=(0,o.up)("q-icon"),d=(0,o.up)("q-input"),c=(0,o.up)("q-item-label"),r=(0,o.up)("admi-item"),m=(0,o.up)("q-list"),u=(0,o.up)("q-tab-panel"),p=(0,o.up)("q-tab-panels"),g=(0,o.up)("q-tab"),_=(0,o.up)("q-tabs"),v=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(v,{flat:"",bordered:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:l.tab,"onUpdate:modelValue":t[2]||(t[2]=e=>l.tab=e),animated:"",class:"bg-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"todos",class:"q-pa-none full-height",style:(0,f.j5)({height:l.size["height"]-80+"px !important"})},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"text-center q-pa-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{dense:"",rounded:"",outlined:"",modelValue:l.search,"onUpdate:modelValue":t[0]||(t[0]=e=>l.search=e)},{append:(0,o.w5)((()=>[(0,o.Wm)(n,{name:"search"})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(c,{header:"",class:"text-center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,f.zw)(l.administradores.length)+" ADMINISTRADORES",1)])),_:1}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.administradores,(t=>((0,o.wg)(),(0,o.iD)("span",{key:t.id,onClick:a=>e.$emit("updateSelectedAdmi",t.id)},[(0,o.Wm)(r,{name:t.name,id:t.id},null,8,["name","id"])],8,h)))),128))])),_:1})])),_:1},8,["style"]),(0,o.Wm)(u,{name:"tops",class:"q-pa-none",style:(0,f.j5)({height:l.size["height"]-80+"px !important"})},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"text-center q-pa-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{dense:"",rounded:"",outlined:"",modelValue:l.search,"onUpdate:modelValue":t[1]||(t[1]=e=>l.search=e)},{append:(0,o.w5)((()=>[(0,o.Wm)(n,{name:"search"})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(c,{header:"",class:"text-center"},{default:(0,o.w5)((()=>[b])),_:1}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.topAdmis,((t,a)=>((0,o.wg)(),(0,o.iD)("span",{key:t.id,onClick:a=>e.$emit("updateSelectedAdmi",t.id)},[(0,o.Wm)(r,{name:t.name,id:t.id,top:a},null,8,["name","id","top"])],8,w)))),128))])),_:1})])),_:1},8,["style"])])),_:1},8,["modelValue"]),(0,o.Wm)(_,{modelValue:l.tab,"onUpdate:modelValue":t[3]||(t[3]=e=>l.tab=e),dense:"",class:"bg-grey-3",align:"justify"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{name:"todos",icon:"person",label:"Todos"}),(0,o.Wm)(g,{name:"tops",icon:"star",label:"Tops"})])),_:1},8,["modelValue"])])),_:1})}var _=a(1957);const v={class:"text-weight-bold"};function W(e,t,a,l,i,s){const n=(0,o.up)("q-icon"),d=(0,o.up)("q-avatar"),c=(0,o.up)("q-item-section"),r=(0,o.up)("q-item-label"),m=(0,o.up)("q-item");return(0,o.wg)(),(0,o.j4)(m,{clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n,{name:"engineering"})])),_:1})])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{lines:"1"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,f.zw)(a.name),1)])),_:1}),(0,o.Wm)(r,{caption:"",lines:"2"},{default:(0,o.w5)((()=>[(0,o._)("span",v,"ID: "+(0,f.zw)(a.id),1)])),_:1})])),_:1}),(0,o.wy)((0,o.Wm)(c,{side:"",top:""},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,f.zw)(void 0!==a.top?l.clasificacion[a.top].label:""),1)])),_:1}),(0,o.Wm)(n,{name:"star",color:void 0!==a.top?l.clasificacion[a.top].color:""},null,8,["color"])])),_:1},512),[[_.F8,void 0!==a.top&&a.top<2]])])),_:1})}const q={name:"AdmiItem",props:["name","id","top"],setup(){return{clasificacion:[{color:"yellow",label:"Empleado del mes"},{color:"blue-grey-10",label:"Sigue intentando bro :("},{color:"brown-10",label:"Para la proxima mano"}]}}};var x=a(490),y=a(1233),Z=a(1357),S=a(2857),k=a(3115),A=a(9984),Q=a.n(A);const I=(0,m.Z)(q,[["render",W]]),T=I;Q()(q,"components",{QItem:x.Z,QItemSection:y.Z,QAvatar:Z.Z,QIcon:S.Z,QItemLabel:k.Z});var D=a(1446),z=a(1569),j=a(6183);const E={components:{AdmiItem:T},name:"AdmisList",emits:["updateSelectedAdmi"],setup(e,t){const a=(0,c.o)(),l=(0,D.Z)(),i=(0,d.qj)([]),s=(0,j.Z)(),n=a.usuariosAdministradores;return(0,o.bv)((async()=>{!l.screen.lt.sm&&Boolean(n.length)&&t.emit("updateSelectedAdmi",n[0].id);try{const e=await z.api.get("top-admis",s.authorizacion),t=e.data.users;i.length=0,t.forEach((e=>{i.push(e)}))}catch(e){console.log(e),l.notify({color:"negative",message:"ha ocurrido un error al traer la lista de administradores, para mas informacion consulte la consola"})}})),{administradores:n,tab:(0,d.iH)("todos"),search:(0,d.iH)(""),size:(0,d.iH)({width:"200px",height:"200px"}),selectedAdmi:(0,d.iH)({}),topAdmis:i}}};var U=a(4458),H=a(9800),B=a(4106),C=a(3246),V=a(6611),L=a(7817),P=a(7661);const O=(0,m.Z)(E,[["render",g]]),Y=O;Q()(E,"components",{QCard:U.Z,QTabPanels:H.Z,QTabPanel:B.Z,QList:C.Z,QItemLabel:k.Z,QInput:V.Z,QIcon:S.Z,QTabs:L.Z,QTab:P.Z});const R={class:"text-weight-bold"};function K(e,t,a,l,i,s){const n=(0,o.up)("q-icon"),d=(0,o.up)("q-avatar"),c=(0,o.up)("q-btn"),r=(0,o.up)("q-item-label"),m=(0,o.up)("q-item-section"),u=(0,o.up)("q-item"),p=(0,o.up)("q-space"),h=(0,o.up)("q-toolbar"),b=(0,o.up)("q-separator"),w=(0,o.up)("admi-detail-item"),g=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(g,{flat:"",bordered:"",style:(0,f.j5)({height:l.size["height"]-24+"px !important"})},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"text-black"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{round:"",flat:"",class:"q-pa-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{size:"80px"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{name:"engineering"})])),_:1})])),_:1}),(0,o.Wm)(u,{class:"q-subtitle-1 q-pl-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{lines:"1"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,f.zw)(l.admi?l.admi.name:""),1)])),_:1}),(0,o.Wm)(r,{caption:"",lines:"2"},{default:(0,o.w5)((()=>[(0,o._)("span",R,"ID: "+(0,f.zw)(l.admi?l.admi.id:""),1)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(p)])),_:1}),(0,o.Wm)(b),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.admiStats.stats,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t},[(0,o.Wm)(w,{icon:e.icon,text_color:e.text_color,value:e.field,label:e.label},null,8,["icon","text_color","value","label"]),t!=l.admiStats.stats.length-1?((0,o.wg)(),(0,o.j4)(b,{key:0,inset:"item"})):(0,o.kq)("",!0)])))),128))])),_:1},8,["style"])}function N(e,t,a,l,i,s){const n=(0,o.up)("q-avatar"),d=(0,o.up)("q-item-section"),c=(0,o.up)("q-item-label"),r=(0,o.up)("q-item"),m=(0,o.Q2)("ripple");return(0,o.wy)(((0,o.wg)(),(0,o.j4)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{avatar:"",top:""},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{icon:e.icon,color:"grey-2","text-color":e.text_color},null,8,["icon","text-color"])])),_:1}),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,{lines:"1"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,f.zw)(e.value),1)])),_:1}),(0,o.Wm)(c,{caption:"",class:"text-grey-8"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,f.zw)(e.label),1)])),_:1})])),_:1})])),_:1})),[[m]])}const $=(0,o.aZ)({name:"AdmiDetailItem",props:["icon","text_color","value","label"]});var F=a(1136);const X=(0,m.Z)($,[["render",N]]),J=X;Q()($,"components",{QItem:x.Z,QItemSection:y.Z,QAvatar:Z.Z,QItemLabel:k.Z}),Q()($,"directives",{Ripple:F.Z});const M={components:{AdmiDetailItem:J},name:"AdmiDetail",props:{id:{type:Number,default:null}},setup(e){const t=(0,c.o)(),a=(0,D.Z)(),l=(0,j.Z)(),i=(0,o.Fl)((()=>e.id?t.getUserById(e.id):{name:"",id:""}));(0,o.YP)(i,(async e=>{try{const t=await z.api.post("/solicitudes-admi",{id:e.id},l.authorizacion),a=t.data.solicitudes,o=new Date(Date.now()).toLocaleString("default",{month:"short",year:"2-digit"}),i=a.filter((e=>new Date(e.created_at).toLocaleString("default",{month:"short",year:"2-digit"})===o));let n={aceptadasTotales:[],completadasTotales:[]},d={aceptadasTotales:[],completadasTotales:[]};a.forEach((e=>{Boolean(e.enProceso)&&!Boolean(e.terminado)&&n.aceptadasTotales.push(e),!Boolean(e.enProceso)&&Boolean(e.terminado)&&n.completadasTotales.push(e)})),i.forEach((e=>{Boolean(e.enProceso)&&!Boolean(e.terminado)&&d.aceptadasTotales.push(e),!Boolean(e.enProceso)&&Boolean(e.terminado)&&d.completadasTotales.push(e)})),s.stats=[{icon:"stacked_bar_chart",label:"",field:"Historico",text_color:"black"},{icon:"hourglass_empty",label:"Solicitudes aceptadas",field:n.aceptadasTotales.length,text_color:"blue"},{icon:"done",label:"Solicitudes completadas",field:n.completadasTotales.length,text_color:"positive"},{icon:"event",label:"",field:"Ultimo mes",text_color:"black"},{icon:"hourglass_empty",label:"Solicitudes aceptadas",field:d.aceptadasTotales.length,text_color:"blue"},{icon:"done",label:"Solicitudes completadas",field:d.completadasTotales.length,text_color:"positive"}]}catch(t){console.log(t),a.notify({color:"negative",message:"Ha ocurrido un error al traer la informacion del administrador, para mas informacion consulta la consola"})}}));const s=(0,d.qj)({stats:[{icon:"stacked_bar_chart",label:"",field:"Historico",text_color:"black"},{icon:"hourglass_empty",label:"Solicitudes aceptadas",field:"0",text_color:"blue"},{icon:"done",label:"Solicitudes completadas",field:"0",text_color:"positive"},{icon:"event",label:"",field:"Ultimo mes",text_color:"black"},{icon:"hourglass_empty",label:"Solicitudes aceptadas",field:"0",text_color:"blue"},{icon:"done",label:"Solicitudes completadas",field:"0",text_color:"positive"}]});return{admi:i,size:(0,d.iH)({width:"200px",height:"200px"}),selectedAdmi:(0,d.qj)({}),admiStats:s}}};var G=a(1663),ee=a(4455),te=a(136),ae=a(926);const oe=(0,m.Z)(M,[["render",K]]),le=oe;Q()(M,"components",{QCard:U.Z,QToolbar:G.Z,QBtn:ee.Z,QAvatar:Z.Z,QIcon:S.Z,QItem:x.Z,QItemSection:y.Z,QItemLabel:k.Z,QSpace:te.Z,QSeparator:ae.Z});const ie={name:"AdministradoresSumario",components:{AsistenciasCompletadasEfectivamente:p,AdmisList:Y,AdmiDetail:le},setup(){const e=(0,d.iH)(null),t=(0,d.iH)(null);return{id:e,admiSelected:t}}};var se=a(9885);const ne=(0,m.Z)(ie,[["render",i]]),de=ne;Q()(ie,"components",{QPage:se.Z})}}]);